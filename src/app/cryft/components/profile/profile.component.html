<div class="profile-component">
  <span id="siteseal"><script async type="text/javascript" src="https://seal.godaddy.com/getSeal?sealID=itNPFbf4NzDfpqnvMA8chDimMGKVYqQGpzq2V0au26vWFLHwzmlsL0wNrytn"></script></span>
  <div class="edit">
    <button mat-stroked-button color="primary" (click)="openDialog()">
      Edit Profile
    </button>
  </div>
  <div class="profile-picture">
    <div *ngIf="profile?.img" class="image">
      <img src="assets/images/{{profile?.img}} .png" />
    </div>
    {{ profile?.name }}
    <button *ngIf="!profile?.img" (click)="choose()">Choose Profile picture</button>
    <button *ngIf="profile?.img" (click)="choose()">Edit Profile picture</button>
    <div *ngIf="chooseClicked" class="grid">
      <div *ngFor="let e of [].constructor(12); let i = index"><img (click)="selectImg(i+1)" src="assets/images/{{i+1}} .png"/></div>
    </div>
  </div>
  <div class="my-currencies">
    <div class="header">My Currencies</div>
  </div>

  <div class="currencies" *ngIf="profile?.currencies.length > 0">
    <table mat-table [dataSource]="profile?.currencies" class="mat-elevation-z8">
      <!-- Position Column -->
      <!-- <ng-container matColumnDef="position">
        <th mat-header-cell *matHeaderCellDef>No.</th>
        <td mat-cell *matCellDef="let element">{{ element.position }}</td>
      </ng-container> -->

      <!-- Currency Name Column -->
      <ng-container matColumnDef="currency">
        <th mat-header-cell *matHeaderCellDef>Currency Name</th>
        <td mat-cell *matCellDef="let element">{{ element.currencyName }}</td>
      </ng-container>

      <!-- Amount Column -->
      <ng-container matColumnDef="amount">
        <th mat-header-cell *matHeaderCellDef>amount</th>
        <td mat-cell *matCellDef="let element">{{ element.quantity }}</td>
      </ng-container>

      <!-- Current Prize  Column -->
      <!-- <ng-container matColumnDef="crrentPrize">
        <th mat-header-cell *matHeaderCellDef>Current Prize(INR)</th>
        <td mat-cell *matCellDef="let element">{{ element.crrentPrize }}</td>
      </ng-container> -->

      <!-- Symbol Column -->
      <!-- <ng-container matColumnDef="symbol">
        <th mat-header-cell *matHeaderCellDef>Symbol</th>
        <td mat-cell *matCellDef="let element">{{ element.symbol }}</td>
      </ng-container> -->

      <!-- Action Column -->
      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef>Action</th>
        <td mat-cell *matCellDef="let element">
          <button mat-raised-button color="primary" (click)="sell(element)">
            Sell
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>
  <div class="currencies" *ngIf="profile?.currencies.length == 0">
    No one has gifted you any Currencies
  </div>

  <div class="my-balance">
    <div class="header">My Balance</div>
    <div class="sub-header">
      Money will be credited to provided bank account if you withdraw
    </div>

    <mat-card>
      <div class="balance">
        Balance : 100
        <mat-form-field
          appearance="fill"
          *ngIf="withdrawEditingMode"
          class="mat"
        >
          <mat-label>Enter Amount</mat-label>
          <div class="amount-container">
            <input matInput type="number" [(ngModel)]="withdrawAmount" />
            <div
              class="err"
              *ngIf="withdrawAmount && withdrawAmount > profile?.balance"
            >
              Amount is greater then your current balance
            </div>
          </div>
        </mat-form-field>
        <button mat-raised-button color="primary" (click)="withdraw()">
          withdraw
        </button>
      </div>
    </mat-card>
  </div>

  <div class="bank-details" #bankDetails>
    <div class="header">Provide Bank Details</div>

    <div class="sub-header">
      Money will be credited to provided bank account if you sell any
      crypocurrency currency
    </div>
    <form [formGroup]="bankAccountDetailsForm">
      <mat-form-field appearance="fill">
        <mat-label>IFSC Code*</mat-label>
        <input
          matInput
          formControlName="ifscCode"
          (change)="fetchBankDetailsByIfsc($event)"
        />
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Bank Name*</mat-label>
        <input matInput formControlName="bankName" />
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Branch*</mat-label>
        <input matInput formControlName="branch" />
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>City*</mat-label>
        <input matInput formControlName="city" />
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Address*</mat-label>
        <input matInput formControlName="address" />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Account Number*</mat-label>
        <input matInput formControlName="accountNumber" />
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>Confirm Account Number*</mat-label>
        <input matInput formControlName="confirmAccountNumber" />
      </mat-form-field>
      <div
        class="err"
        *ngIf="
          bankAccountDetailsForm.controls.accountNumber.value &&
          bankAccountDetailsForm.controls.confirmAccountNumber.value &&
          bankAccountDetailsForm.controls.accountNumber.value !=
            bankAccountDetailsForm.controls.confirmAccountNumber.value
        "
      >
        Account number and confirm account number is not same
      </div>

      <div
        class="matched"
        *ngIf="
          bankAccountDetailsForm.controls.accountNumber.value &&
          bankAccountDetailsForm.controls.confirmAccountNumber.value &&
          bankAccountDetailsForm.controls.accountNumber.value ==
            bankAccountDetailsForm.controls.confirmAccountNumber.value
        "
      >
        Account Number matched
      </div>

      <mat-form-field appearance="fill">
        <mat-label>Account holder Name*</mat-label>
        <input matInput formControlName="accountHolderName" />
      </mat-form-field>
      <button
        mat-raised-button
        color="primary"
        (click)="saveBankDetails()"
        [disabled]="
          !bankAccountDetailsForm.valid ||
          bankAccountDetailsForm.controls.accountNumber.value !=
            bankAccountDetailsForm.controls.confirmAccountNumber.value
        "
      >
        Save
      </button>
    </form>
  </div>
  <div class="logout">
    <button mat-stroked-button color="accent" (click)="logout()">
      Log out
    </button>
  </div>
  <div class="orders"></div>
</div>
